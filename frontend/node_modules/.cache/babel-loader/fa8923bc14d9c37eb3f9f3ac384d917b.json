{"ast":null,"code":"var _jsxFileName = \"/Users/Deninod/Python/Final_project/TireShield/frontend/src/components_react/AddTrip/index.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport { FirebaseContext } from '../Firebase';\nimport { AuthUserContext, withAuthorization } from '../Session';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider, Calendar, useStaticState } from \"@material-ui/pickers\";\nimport ruLocale from \"date-fns/locale/ru\";\nimport './addtrip.css';\nimport { Paper } from '@material-ui/core';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AddTrip() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [starting, setStarting] = useState(\"\");\n  const [destination, setDestination] = useState(\"\");\n  const [distance, setDistance] = useState(\"\");\n  const [weather, setWeather] = useState(\"\");\n  const [start_date, setStartDate] = useState(\"\");\n  const [end_date, setEndDate] = useState(\"\");\n  const [vehicle_id, setVehicleId] = useState(\"\");\n  const [success, setSuccess] = useState(true);\n  const [vehicles, setVehicles] = useState([]);\n  const useStyles = makeStyles(theme => ({\n    root: {\n      '& .MuiTextField-root': {\n        margin: theme.spacing(1),\n        width: '25ch'\n      }\n    }\n  }));\n\n  function MyCalendar() {\n    _s();\n\n    const [start_date, setStartDate] = useState(new Date());\n    const [end_date, setEndDate] = useState(new Date());\n\n    const handleDateChange = date => {\n      setStartDate(date);\n    };\n\n    const handleEndDateChange = date => {\n      setEndDate(date);\n    };\n  }\n\n  _s(MyCalendar, \"C4mOLra1Hqr/EgtaWDsMpi3Zj+g=\");\n\n  ;\n  const {\n    pickerProps,\n    wrapperProps\n  } = useStaticState({\n    start_date,\n    onChange: handleDateChange\n  }); //   const classes = useStyles();\n  //   const [value, setStarting] = React.useState('Starting');\n  //   const handleChange = (event) => {\n  //     setValue(event.target.value);\n  //   };\n\n  const userId = useContext(FirebaseContext).auth.currentUser.uid;\n\n  async function getVehicles() {\n    console.log(userId);\n    const configs = {\n      method: 'post',\n      body: JSON.stringify({\n        \"user_id\": userId\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const response = await fetch(\"http://localhost:5000/api/users_vehicle\", configs);\n    const userVehicles = await response.json();\n    console.log(userVehicles);\n    setVehicles(userVehicles);\n    setVehicleId(userVehicles[0][0]);\n  }\n\n  async function addTrip() {\n    const body = JSON.stringify({\n      starting: starting,\n      destination: destination,\n      distance: distance,\n      weather: weather,\n      start_date: new Date(start_date).getTime(),\n      end_date: new Date(end_date).getTime(),\n      vehicle_id: vehicle_id,\n      user_id: userId\n    });\n    const configs = {\n      method: 'post',\n      body: body,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const response = await fetch(\"http://localhost:5000/api/trip_add\", configs);\n    const success = await response.json();\n    setSuccess(success.status);\n  }\n\n  useEffect(() => getVehicles(), []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"example-parent\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Add a New Trip\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          classname: \"vehicleform\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              id: \"outlined-multiline-flexible\",\n              multiline: true,\n              rowsMax: 4,\n              value: starting,\n              variant: \"outlined\",\n              type: \"text\",\n              label: \"Starting\",\n              onChange: e => setStarting(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"outlined-multiline-flexible\",\n              multiline: true,\n              rowsMax: 4,\n              value: destination,\n              variant: \"outlined\",\n              type: \"text\",\n              label: \"Destination\",\n              onChange: e => setDestination(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"outlined-multiline-flexible\",\n              multiline: true,\n              rowsMax: 4,\n              value: distance,\n              variant: \"outlined\",\n              type: \"text\",\n              label: \"Distance\",\n              onChange: e => setDistance(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              id: \"outlined-multiline-flexible\",\n              multiline: true,\n              rowsMax: 4,\n              value: weather,\n              variant: \"outlined\",\n              type: \"text\",\n              label: \"Weather\",\n              onChange: e => setWeather(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              children: /*#__PURE__*/_jsxDEV(MuiPickersUtilsProvider, {\n                utils: DateFnsUtils,\n                locale: ruLocale,\n                children: [/*#__PURE__*/_jsxDEV(Paper, {\n                  style: {\n                    overflow: \"hidden\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Calendar, {\n                    date: start_date,\n                    onChange: handleDateChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  fullWidth: true,\n                  onclick: wrapperProps.onClear,\n                  children: [\"Clear date (\", start_date && start_date.toJSON(), \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                placeholder: \"End Date\",\n                onChange: e => setEndDate(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                value: vehicles[0] && vehicles[0][0],\n                onChange: e => e.target.value,\n                children: vehicles.map(v => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: v[0],\n                  children: [v[1].make, \"\\xA0\", v[1].model]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 56\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: addTrip,\n                children: \"submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(AddTrip, \"2+zM9p8JkJVRvGOFDdM4DWXxwqM=\", false, function () {\n  return [useStaticState];\n});\n\n_c = AddTrip;\n\nconst condition = authUser => !!authUser;\n\nexport default withAuthorization(condition)(AddTrip);\n\nvar _c;\n\n$RefreshReg$(_c, \"AddTrip\");","map":{"version":3,"sources":["/Users/Deninod/Python/Final_project/TireShield/frontend/src/components_react/AddTrip/index.js"],"names":["React","useContext","useState","useEffect","FirebaseContext","AuthUserContext","withAuthorization","Button","Typography","TextField","makeStyles","DateFnsUtils","MuiPickersUtilsProvider","Calendar","useStaticState","ruLocale","Paper","AddTrip","starting","setStarting","destination","setDestination","distance","setDistance","weather","setWeather","start_date","setStartDate","end_date","setEndDate","vehicle_id","setVehicleId","success","setSuccess","vehicles","setVehicles","useStyles","theme","root","margin","spacing","width","MyCalendar","Date","handleDateChange","date","handleEndDateChange","pickerProps","wrapperProps","onChange","userId","auth","currentUser","uid","getVehicles","console","log","configs","method","body","JSON","stringify","headers","response","fetch","userVehicles","json","addTrip","getTime","user_id","status","e","target","value","overflow","onClear","toJSON","map","v","make","model","condition","authUser"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { FirebaseContext } from '../Firebase';\nimport { AuthUserContext, withAuthorization } from '../Session';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider, Calendar, useStaticState } from \"@material-ui/pickers\";\nimport ruLocale from \"date-fns/locale/ru\";\nimport './addtrip.css';\nimport { Paper } from '@material-ui/core';\n\n\n\n\n\nfunction AddTrip() {\n    const[starting, setStarting] = useState(\"\");\n    const[destination, setDestination] = useState(\"\");\n    const[distance, setDistance] = useState(\"\");\n    const[weather, setWeather] = useState(\"\");\n    const[start_date, setStartDate] = useState(\"\");\n    const[end_date, setEndDate] = useState(\"\")\n    const[vehicle_id, setVehicleId] = useState(\"\");\n    const[success, setSuccess] = useState(true)\n\n\n\n    const[vehicles, setVehicles] = useState([]);\n\n    const useStyles = makeStyles((theme) => ({\n        root: {\n          '& .MuiTextField-root': {\n            margin: theme.spacing(1),\n            width: '25ch',\n          },\n        },\n      }));\n\n    function MyCalendar() {\n        const [start_date, setStartDate] = useState(new Date());\n        const [end_date, setEndDate] = useState(new Date());\n    \n\n        const handleDateChange = (date) => {\n            setStartDate(date);\n        }\n\n        const handleEndDateChange = (date) => {\n            setEndDate(date);\n        }\n\n    };\n\n    const { pickerProps, wrapperProps } = useStaticState({ start_date, onChange: handleDateChange,\n    });\n\n    //   const classes = useStyles();\n    //   const [value, setStarting] = React.useState('Starting');\n    \n    //   const handleChange = (event) => {\n    //     setValue(event.target.value);\n    //   };\n    \n    \n    const userId = useContext(FirebaseContext).auth.currentUser.uid\n\n    async function getVehicles() {\n        console.log(userId)\n        const configs = {\n            method: 'post',\n            body: JSON.stringify({\"user_id\": userId}),\n            headers: {\"Content-Type\": \"application/json\"}\n        }\n        const response = await fetch(\"http://localhost:5000/api/users_vehicle\", configs);\n        const userVehicles = await response.json();\n        console.log(userVehicles)\n        setVehicles(userVehicles)\n        setVehicleId(userVehicles[0][0]);\n    }\n\n\n    \n    async function addTrip() {\n        const body = JSON.stringify({\n            starting: starting, \n            destination: destination,\n            distance: distance,\n            weather: weather,\n            start_date: new Date(start_date).getTime(),\n            end_date: new Date(end_date).getTime(),\n            vehicle_id: vehicle_id,\n            user_id: userId\n            \n        })\n        const configs = {\n            method: 'post',\n            body: body,\n            headers: {\"Content-Type\": \"application/json\"}\n        }\n        const response = await fetch(\"http://localhost:5000/api/trip_add\", configs);\n        const success = await response.json();\n        setSuccess(success.status);\n\n    }\n\n\n    useEffect (() => getVehicles(), []);\n\n    return (\n    \n        <div className=\"container4\">\n            <div className=\"example-parent\">\n            <div>\n                <h2>Add a New Trip</h2>\n                    <form classname=\"vehicleform\">\n                        <div>\n                            <TextField id=\"outlined-multiline-flexible\"\n                            multiline\n                            rowsMax={4}\n                            value={starting}\n                            variant=\"outlined\"\n                            type=\"text\" \n                            label=\"Starting\" \n                            onChange={e => setStarting(e.target.value)}>\n                            \n                            </TextField>\n                            <TextField\n                                id=\"outlined-multiline-flexible\"\n                                multiline\n                                rowsMax={4}\n                                value={destination}\n                                variant=\"outlined\"\n                                type=\"text\" \n                                label=\"Destination\" \n                                onChange={e => setDestination(e.target.value)}>\n                            </TextField>\n                            <TextField\n                                id=\"outlined-multiline-flexible\"\n                                multiline\n                                rowsMax={4}\n                                value={distance}\n                                variant=\"outlined\"\n                                type=\"text\" \n                                label=\"Distance\" \n                                onChange={e => setDistance(e.target.value)}>\n                            </TextField>\n                            <TextField\n                                id=\"outlined-multiline-flexible\"\n                                multiline\n                                rowsMax={4}\n                                value={weather}\n                                variant=\"outlined\"\n                                type=\"text\" \n                                label=\"Weather\" \n                                onChange={e => setWeather(e.target.value)}>\n                            </TextField>\n                        </div>\n                        <div> \n                            <TextField>\n                                <MuiPickersUtilsProvider utils={DateFnsUtils} locale={ruLocale}>\n                                    <Paper style={{ overflow: \"hidden\"}}>\n                                        <Calendar\n                                        date={start_date}\n                                        onChange={handleDateChange}\n\n                                        />\n                                \n                                    </Paper>\n                                    <Button fullWidth onclick={wrapperProps.onClear}>\n                                        Clear date ({start_date && start_date.toJSON()})\n                                    </Button>\n                                </MuiPickersUtilsProvider>\n                            </TextField>\n                            <TextField>\n                                <input \n                                type=\"date\" \n                                placeholder=\"End Date\" \n                                onChange={e => setEndDate(e.target.value)}\n                                />\n                            </TextField>\n                            <TextField>\n                                <select value={vehicles[0] && vehicles[0][0]}\n                                onChange={e => (e.target.value)}>\n                                    {vehicles.map(v => <option value={v[0]}>{v[1].make}&nbsp;{v[1].model}</option>)}\n                                </select>\n                                </TextField>\n                            <TextField>\n                                <button type=\"button\" onClick={addTrip}>\n                                    submit\n                                </button>\n                            </TextField>\n                        </div>\n                    </form>\n            </div>\n            </div>\n\n        </div>\n\n\n    );\n\n}\n\n\nconst condition = authUser => !!authUser;\n\n\nexport default withAuthorization(condition)(AddTrip);\n\n\n"]},"metadata":{},"sourceType":"module"}